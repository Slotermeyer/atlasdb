apply from: "../gradle/shared.gradle"
apply plugin: 'com.github.johnrengelman.shadow'

versionsLock {
    disableJavaPluginDefaults()
}

dependencies {
    implementation 'com.palantir.cassandra:cassandra-thrift'
    implementation 'org.apache.thrift:libthrift:0.9.2'
}

shadowJar {
    // We want to relocate usage of libthrift inside cassandra-thrift but not other classes
    relocate 'org.apache.thrift', 'shadow.org.apache.thrift'

    mergeServiceFiles()
    classifier ''
}

jar.dependsOn shadowJar
jar.onlyIf { false }
